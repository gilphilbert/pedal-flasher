<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>DIY FFB Firmware Flasher</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@4.19.0/css/xterm.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,700">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.min.css">
        <link rel="stylesheet" href="index.f7745f0c.css">

        <link rel="icon" href="favicon.7fae9a33.ico">
         <script type="module" src="index.runtime.5d8d949e.js"></script><script src="https://cdn.jsdelivr.net/npm/xterm@4.19.0/lib/xterm.min.js"></script>
         <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.js"></script>
    </head>
    <body>
        <div class="section gray">
            <div class="container">
                <h1><img src="diy-ffb-pedal-logo.d269528b.png" width="42" height="42" style="vertical-align: middle" crossorigin=""> Web Flasher</h1>
                <h4>Firmware flash tool for the <a href="https://github.com/ChrGri/DIY-Sim-Racing-FFB-Pedal">DIY FFB Pedal</a> project</h4>
            </div>
        </div>
        <div class="section">

            <div class="container">

                <div id="safariWarning" class="callout callout-danger">
                    <p class="title">Unsupported</p>
                    This tool is not supported on Safari Browser. Please use a Chromium-based brower (Chrome, Edge, Brave, etc.)
                </div>

                <div class="callout callout-info">
                    <p class="title">Get your board ready</p>
                    Start with the board unplugged. Hold the "Flash" or "Boot" button on the board and plug it in to this computer - the board is now ready to flash new firmware. Click the "Connect" button below.
                </div>
                <input class="button-primary" type="button" id="connectButton" value="Connect">
                <input class="button-warning" type="button" id="disconnectButton" value="Disconnect">

                <form>
                    <fieldset>

                        <label id="lblConnTo">Connected device: (none)</label>

                        <label for="boardType" id="lblBoardType">Board type:</label>
                        <select name="boardType" id="boardType">
                            <option value="control">Control Board</option>
                            <option value="bridge">Wireless Controller (Bridge)</option>
                        </select>

                        <button class="accordion">Can't find your board?</button>
                        <div class="panel">
                            <h3>Control boards</h3>
                            <div class="row">
                                <div class="column column-25"><p class="text-center"><b>PCBAv1</b></p><img src="Gilphilbert_PCBAv1.4927e8b5.jpg"></div>
                                <div class="column column-25"><p class="text-center"><b>V3</b></p><img src="V3_ESP32.05abe9f7.jpg"></div>
                                <div class="column column-25"><p class="text-center"><b>V4</b></p><img src="V4_ESP32S3.c12b1c33.jpg"></div>
                                <div class="column column-25"><p class="text-center"><b>Speedcrafter</b></p><img src="Speedcrafter.2bf9250b.jpg"></div>
                              </div>
                              <h3>Bridge boards</h3>
                              <div class="row">
                                  <div class="column column-25"><p class="text-center"><b>Waveshare ESP32-S3</b></p><img src="waveshare-esp32-s3-dev-kit-n8r8-1.5587f1aa.jpg"></div>
                                  <div class="column column-25"><p class="text-center"><b>Espressif ESP32-S3 DevKit</b></p><img src="espressif-esp32-s3-devkit.33ec169e.png"></div>
                              </div>
                              <p><b>Note:</b> Bridge boards are all ESP32-S3 models. If your DevKit is an ESP32-based board, you will not be able to select it</p>
                          
                        </div>

                        <label for="channel" id="lblChannel">Channel:</label>
                        <select name="channel" id="channel">
                            <option value="main">Stable (Recommended)</option>
                            <option value="dev">Development</option>
                        </select>

                        <label for="boardName" id="lblBoardName">Select a board:</label>
                        <select name="boardName" id="boardName"></select>

                        <label id="lblFirmwareVersion">Firmware version:</label>

                        <button class="accordion">Advanced options</button>
                        <div class="panel">
                          <input type="checkbox" id="reducedSpeed">
                          <label for="reducedSpeed">Reduced speed write (use if you get timeouts when flashing)</label>
                        </div>

                        <input class="button-primary" type="button" id="programButton" value="Flash Firmware">

                        <div class="progress" id="progress">
                            <div class="bar" id="progressBar"></div>
                        </div>

                        <div class="callout callout-success" id="successNotice">
                            <p>Firmware flashed successfully</p>
                        </div>
                        <div class="callout callout-danger" id="failureNotice">
                            <p>Firmware flashing failed</p>
                            <p id="failureMessage"></p>
                        </div>

                        <div class="alert alert-danger alert-dismissible" id="alertDiv" style="margin-top: 10px; display: none">
                            <a href="#" class="close" aria-label="close" onclick="$('.alert').hide()">&times;</a>
                            <span id="alertmsg"></span>
                        </div>

                    </fieldset>
                </form>

                <input class="button-outline" type="button" id="consoleButton" value="Show console">
                <div id="terminal"></div>

                <div class="stats">
                    <p>Hits: <span id="pageHits"></span></p>
                    <p>Flashes: <span id="pageFlashes"></span></p>
                    <p>Success: <span id="pageSuccessRate"></span></p>
                </div>
            </div>
        </div>
        <script src="index.5f8b07bd.js" type="module"></script>
    </body>
</html>