<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>DIY FFB Firmware Flasher</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@4.19.0/css/xterm.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,700">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.min.css">
        <link rel="stylesheet" href="index.b2ef739d.css">

        <link rel="icon" href="favicon.ee2246ac.ico">
         <script type="module" src="index.runtime.e09fd763.js"></script><script src="https://cdn.jsdelivr.net/npm/xterm@4.19.0/lib/xterm.min.js"></script>
         <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.js"></script>
    </head>
    <body>
        <div class="section gray">
            <div class="container">
                <h1><img src="diy-ffb-pedal-logo.d269528b.png" width="42" height="42" style="vertical-align: middle" crossorigin=""> Web Flasher</h1>
                <h4>Firmware flash tool for the <a href="https://github.com/ChrGri/DIY-Sim-Racing-FFB-Pedal">DIY FFB Pedal</a> project</h4>
            </div>
        </div>
        <div class="section">

            <div class="container">

                <div id="safariWarning" class="callout callout-danger">
                    <p class="title">Unsupported</p>
                    This tool is not supported on Safari Browser. Please use a Chromium-based brower (Chrome, Edge, Brave, etc.)
                </div>

                <div class="callout callout-info">
                    <p class="title">Get your board ready</p>
                    Start with the board unplugged. Hold the "Flash" or "Boot" button on the board and plug it in to this computer - the board is now ready to flash new firmware. Click the "Connect" button below.
                </div>
                <input class="button-primary" type="button" id="connectButton" value="Connect">
                <input class="button-warning" type="button" id="disconnectButton" value="Disconnect">

                <form>
                    <fieldset>

                        <label id="lblConnTo">Connected device: (none)</label>

                        <div class="row">
                            <div class="column column-75">
                                <label for="boardType" id="lblBoardType">Board type</label>
                                <select name="boardType" id="boardType">
                                    <option value="control">Control Board</option>
                                    <option value="bridge">Wireless Controller (Bridge)</option>
                                </select>

                                <label for="channel" id="lblChannel">Channel</label>
                                <select name="channel" id="channel">
                                    <option value="main">Stable (Recommended)</option>
                                    <option value="dev">Development</option>
                                </select>

                                <label for="boardName" id="lblBoardName">Select a board</label>
                                <select name="boardName" id="boardName"></select>
                            </div>
                            <div class="column column-25">
                                <img src="Gilphilbert_PCBAv1.bd7a2d5e.png" id="boardPreviewGilphilbert_PCBAv1" name="boardPreviews" style="display: none">
                                <img src="Speedcrafter.1603bb4c.png" id="boardPreviewSpeedcrafter" name="boardPreviews" style="display: none">
                                <img src="V3_ESP32.86b441e3.png" id="boardPreviewV3_ESP32" name="boardPreviews" style="display: none">
                                <img src="V4_ESP32S3.578fdb80.png" id="boardPreviewV4_ESP32S3" name="boardPreviews" style="display: none">

                                <img src="DevKit.64bdcaef.jpg" id="boardPreviewDevKit" name="boardPreviews" style="display: none">
                                <img src="placeholder.074851a7.png" id="boardPreviewBridge_FANATEC" name="boardPreviews" style="display: none">
                                <img src="placeholder.074851a7.png" id="boardPreviewGilphilbert_Dongle" name="boardPreviews" style="display: none">

                                <img src="placeholder.074851a7.png" id="boardPreviewPlaceholder" name="boardPreviews">
                            </div>
                        </div>

                        <div class="row">
                            <div class="column column-20">
                                <input class="button-primary" type="button" id="programButton" value="Flash Firmware">
                            </div>
                            <div class="column column-80">
                                <div class="progress" id="progress">
                                    <div class="bar" id="progressBar"></div>
                                </div>
                            </div>
                        </div>

                        <div class="callout callout-success" id="successNotice">
                            <p>Firmware flashed successfully</p>
                        </div>
                        <div class="callout callout-danger" id="failureNotice">
                            <p>Firmware flashing failed</p>
                            <p id="failureMessage"></p>
                        </div>

                        <div class="alert alert-danger alert-dismissible" id="alertDiv" style="margin-top: 10px; display: none">
                            <a href="#" class="close" aria-label="close" onclick="$('.alert').hide()">&times;</a>
                            <span id="alertmsg"></span>
                        </div>

                    </fieldset>
                </form>

                <input class="button-outline" type="button" id="consoleButton" value="Show console">
                <div id="terminal"></div>

                <div class="stats">
                    <p>Hits: <span id="pageHits"></span></p>
                    <p>Flashes: <span id="pageFlashes"></span></p>
                    <p>Success: <span id="pageSuccessRate"></span></p>
                </div>
            </div>
        </div>
        <script src="index.84f93bee.js" type="module"></script>
    </body>
</html>
